---
layout: post
title:  "【Volley】Pool"
date:   2017-03-20 13:46:04 +0800
categories: android
tag: [android]
---
Volley 中使用到 Pool 的是 ByteArrayPool。

http://www.voidcn.com/blog/yuan514168845/article/p-4950324.html

BasicNetwork#entityToBytes(HttpEntity) 使用 PoolingByteArrayOutputStream 来将网络响应的内容转换为 byte 数组，
而 PoolingByteArrayOutputStream 内部就是使用 ByteArrayPool 作为字节缓存池。至于 ByteArrayPool。 的设计意图，在文档中已经说明了：

当网络请求得到返回数据以后，我们需要在内存开辟出一块区域来存放我们得到的网络数据，不论是json还是图片，都会存在于内存的某一块区域，然后拿到UI显示，然而客户端请求是相当频繁的操作，想一下我们平时使用知乎等一些客户端，几乎每一个操作都要进行网络请求（虽然知乎大部分是WebView）。那么问题来了：这么频繁的数据请求，获得数据以后我们先要在堆内存开辟存储空间，然后显示，等到时机成熟，GC回收这块区域，如此往复，那么GC的负担就相当的重，然而Android客户端处理能力有限，频繁GC对客户端的性能有直接影响。我们能不能减少GC和内存的分配呢？我想这个问题就是这个类的产生背景
