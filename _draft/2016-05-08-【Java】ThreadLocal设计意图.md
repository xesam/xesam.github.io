---
layout: post
title:  "【Java】ThreadLocal设计意图"
date:   2016-05-08 13:46:04 +0800
categories: Java
---
## 基本设计

首先看一个熟悉的场景：排队买票。

从理论上看，针对“排队买票”这个场景，我们可以有以下几种方案设计：

1. 固定设置一个售票窗口，每新来一个购票者就排在队伍的最后面。



2. 动态设置售票窗口数量，每新来一个购票者就新开一个窗口来接待购票者。



3. 固定设置 N 个售票窗口，每新来一个购票者就选择一个售票窗口。




## 存在问题

线程池的使用问题

## 结束语

ThreadLocal 主要是用来平衡资源与效率的，并不是一种同步机制，因为每个线程持有的都是不同的对象。至于对象的状态问题，交给别的角色去处理了。
所以，本质上是将整个同步的时机向后延迟了（或者说，转移了同步责任）。
